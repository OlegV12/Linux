oleg@oleg-VirtualBox:~$ sudo iptables-save
# Generated by iptables-save v1.8.4 on Wed Dec  9 20:04:59 2020
*filter
:INPUT DROP [29:4857]
:FORWARD DROP [0:0]
:OUTPUT DROP [15:2001]
-A INPUT -i lo -j ACCEPT
-A INPUT -p icmp -j ACCEPT
-A INPUT -p tcp -m state --state RELATED,ESTABLISHED -j ACCEPT
-A INPUT -p udp -m state --state RELATED,ESTABLISHED -j ACCEPT
-A INPUT -i eth0 -p tcp -m tcp --dport 22 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 80 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 22 -j ACCEPT
-A OUTPUT -o lo -j ACCEPT
-A OUTPUT -p icmp -j ACCEPT
-A OUTPUT -p tcp -m tcp --sport 32768:61000 -j ACCEPT
-A OUTPUT -p udp -m udp --sport 32768:61000 -j ACCEPT
-A OUTPUT -o eth0 -p tcp -m tcp --sport 22 -j ACCEPT
-A OUTPUT -p tcp -m tcp --dport 80 -j ACCEPT
-A OUTPUT -p tcp -m tcp --dport 22 -j ACCEPT
COMMIT
# Completed on Wed Dec  9 20:04:59 2020
oleg@oleg-VirtualBox:~$ sudo apt install apt-transport-https ca-certificates curl gnupg-agent software-properties-common -y
Чтение списков пакетов… Готово
Построение дерева зависимостей       
Чтение информации о состоянии… Готово
Уже установлен пакет ca-certificates самой новой версии (20201027ubuntu0.20.04.1).
ca-certificates помечен как установленный вручную.
Следующие пакеты устанавливались автоматически и больше не требуются:
  geoip-database libfprint-2-tod1 libgeoip1 libnginx-mod-http-image-filter
  libnginx-mod-http-xslt-filter libnginx-mod-mail libnginx-mod-stream
  libnginx-mod-stream-geoip nginx-common nginx-core
Для их удаления используйте «sudo apt autoremove».
Будут установлены следующие дополнительные пакеты:
  libcurl4 python3-software-properties software-properties-gtk
Следующие НОВЫЕ пакеты будут установлены:
  apt-transport-https curl gnupg-agent
Следующие пакеты будут обновлены:
  libcurl4 python3-software-properties software-properties-common
  software-properties-gtk
Обновлено 4 пакетов, установлено 3 новых пакетов, для удаления отмечено 0 пакетов, и 40 пакетов не обновлено.
Необходимо скачать 268 kB/502 kB архивов.
После данной операции объём занятого дискового пространства возрастёт на 617 kB.
Пол:1 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 curl amd64 7.68.0-1ubuntu2.4 [161 kB]
Пол:2 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 gnupg-agent all 2.2.19-3ubuntu2 [5 236 B]
Пол:3 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 software-properties-common all 0.98.9.3 [10,6 kB]
Пол:4 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 software-properties-gtk all 0.98.9.3 [64,0 kB]
Пол:5 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 python3-software-properties all 0.98.9.3 [25,3 kB]
Пол:6 http://security.ubuntu.com/ubuntu focal-security/universe amd64 apt-transport-https all 2.0.2ubuntu0.2 [1 708 B]
Получено 268 kB за 1с (533 kB/s)                                               
Выбор ранее не выбранного пакета apt-transport-https.
(Чтение базы данных … на данный момент установлено 193775 файлов и каталогов.)
Подготовка к распаковке …/0-apt-transport-https_2.0.2ubuntu0.2_all.deb …
Распаковывается apt-transport-https (2.0.2ubuntu0.2) …
Подготовка к распаковке …/1-libcurl4_7.68.0-1ubuntu2.4_amd64.deb …
Распаковывается libcurl4:amd64 (7.68.0-1ubuntu2.4) на замену (7.68.0-1ubuntu2.2)
 …
Выбор ранее не выбранного пакета curl.
Подготовка к распаковке …/2-curl_7.68.0-1ubuntu2.4_amd64.deb …
Распаковывается curl (7.68.0-1ubuntu2.4) …
Выбор ранее не выбранного пакета gnupg-agent.
Подготовка к распаковке …/3-gnupg-agent_2.2.19-3ubuntu2_all.deb …
Распаковывается gnupg-agent (2.2.19-3ubuntu2) …
Подготовка к распаковке …/4-software-properties-common_0.98.9.3_all.deb …
Распаковывается software-properties-common (0.98.9.3) на замену (0.98.9.2) …
Подготовка к распаковке …/5-software-properties-gtk_0.98.9.3_all.deb …
Распаковывается software-properties-gtk (0.98.9.3) на замену (0.98.9.2) …
Подготовка к распаковке …/6-python3-software-properties_0.98.9.3_all.deb …
Распаковывается python3-software-properties (0.98.9.3) на замену (0.98.9.2) …
Настраивается пакет apt-transport-https (2.0.2ubuntu0.2) …
Настраивается пакет python3-software-properties (0.98.9.3) …
Настраивается пакет gnupg-agent (2.2.19-3ubuntu2) …
Настраивается пакет libcurl4:amd64 (7.68.0-1ubuntu2.4) …
Настраивается пакет curl (7.68.0-1ubuntu2.4) …
Настраивается пакет software-properties-common (0.98.9.3) …
Настраивается пакет software-properties-gtk (0.98.9.3) …
Обрабатываются триггеры для dbus (1.12.16-2ubuntu2.1) …
Обрабатываются триггеры для shared-mime-info (1.15-1) …
Обрабатываются триггеры для desktop-file-utils (0.24-1ubuntu3) …
Обрабатываются триггеры для mime-support (3.64ubuntu1) …
Обрабатываются триггеры для hicolor-icon-theme (0.17-2) …
Обрабатываются триггеры для gnome-menus (3.36.0-1ubuntu1) …
Обрабатываются триггеры для libglib2.0-0:amd64 (2.64.3-1~ubuntu20.04.1) …
Обрабатываются триггеры для libc-bin (2.31-0ubuntu9.1) …
Обрабатываются триггеры для man-db (2.9.1-1) …
oleg@oleg-VirtualBox:~$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
OK
oleg@oleg-VirtualBox:~$ sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"
Сущ:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease
Сущ:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease              
Сущ:3 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease            
Сущ:4 http://ppa.launchpad.net/nginx/stable/ubuntu focal InRelease             
Пол:5 https://download.docker.com/linux/ubuntu focal InRelease [36,2 kB]       
Пол:6 https://download.docker.com/linux/ubuntu focal/stable amd64 Packages [5 156 B]
Сущ:7 http://security.ubuntu.com/ubuntu focal-security InRelease 
Получено 41,3 kB за 1с (42,4 kB/s)        
Чтение списков пакетов… Готово
oleg@oleg-VirtualBox:~$ sudo apt update
Сущ:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease
Сущ:2 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease              
Сущ:3 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease            
Сущ:4 http://security.ubuntu.com/ubuntu focal-security InRelease               
Сущ:5 http://ppa.launchpad.net/nginx/stable/ubuntu focal InRelease             
Сущ:6 https://download.docker.com/linux/ubuntu focal InRelease                 
Чтение списков пакетов… Готово            
Построение дерева зависимостей       
Чтение информации о состоянии… Готово
Может быть обновлено 40 пакетов. Запустите «apt list --upgradable» для их показа.
oleg@oleg-VirtualBox:~$ sudo apt install docker-ce -y
Чтение списков пакетов… Готово
Построение дерева зависимостей       
Чтение информации о состоянии… Готово
Следующие пакеты устанавливались автоматически и больше не требуются:
  geoip-database libfprint-2-tod1 libgeoip1 libnginx-mod-http-image-filter
  libnginx-mod-http-xslt-filter libnginx-mod-mail libnginx-mod-stream
  libnginx-mod-stream-geoip nginx-common nginx-core
Для их удаления используйте «sudo apt autoremove».
Будут установлены следующие дополнительные пакеты:
  containerd.io docker-ce-cli docker-ce-rootless-extras git git-man
  liberror-perl pigz slirp4netns
Предлагаемые пакеты:
  aufs-tools cgroupfs-mount | cgroup-lite git-daemon-run | git-daemon-sysvinit
  git-doc git-el git-email git-gui gitk gitweb git-cvs git-mediawiki git-svn
Следующие НОВЫЕ пакеты будут установлены:
  containerd.io docker-ce docker-ce-cli docker-ce-rootless-extras git git-man
  liberror-perl pigz slirp4netns
Обновлено 0 пакетов, установлено 9 новых пакетов, для удаления отмечено 0 пакетов, и 40 пакетов не обновлено.
Необходимо скачать 106 MB архивов.
После данной операции объём занятого дискового пространства возрастёт на 484 MB.
Пол:1 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 pigz amd64 2.4-1 [57,4 kB]
Пол:2 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 liberror-perl all 0.17029-1 [26,5 kB]
Пол:3 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 git-man all 1:2.25.1-1ubuntu3 [884 kB]
Пол:4 http://ru.archive.ubuntu.com/ubuntu focal/main amd64 git amd64 1:2.25.1-1ubuntu3 [4 554 kB]
Пол:5 https://download.docker.com/linux/ubuntu focal/stable amd64 containerd.io amd64 1.4.3-1 [28,1 MB]
Пол:6 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 slirp4netns amd64 0.4.3-1 [74,3 kB]
Пол:7 https://download.docker.com/linux/ubuntu focal/stable amd64 docker-ce-cli amd64 5:20.10.0~3-0~ubuntu-focal [39,1 MB]
Пол:8 https://download.docker.com/linux/ubuntu focal/stable amd64 docker-ce amd64 5:20.10.0~3-0~ubuntu-focal [24,8 MB]
Пол:9 https://download.docker.com/linux/ubuntu focal/stable amd64 docker-ce-rootless-extras amd64 5:20.10.0~3-0~ubuntu-focal [8 905 kB]
Получено 106 MB за 2мин 21с (757 kB/s)                                         
Выбор ранее не выбранного пакета pigz.
(Чтение базы данных … на данный момент установлено 193790 файлов и каталогов.)
Подготовка к распаковке …/0-pigz_2.4-1_amd64.deb …
Распаковывается pigz (2.4-1) …
Выбор ранее не выбранного пакета containerd.io.
Подготовка к распаковке …/1-containerd.io_1.4.3-1_amd64.deb …
Распаковывается containerd.io (1.4.3-1) …
Выбор ранее не выбранного пакета docker-ce-cli.
Подготовка к распаковке …/2-docker-ce-cli_5%3a20.10.0~3-0~ubuntu-focal_amd64.deb
 …
Распаковывается docker-ce-cli (5:20.10.0~3-0~ubuntu-focal) …
Выбор ранее не выбранного пакета docker-ce.
Подготовка к распаковке …/3-docker-ce_5%3a20.10.0~3-0~ubuntu-focal_amd64.deb …
Распаковывается docker-ce (5:20.10.0~3-0~ubuntu-focal) …
Выбор ранее не выбранного пакета docker-ce-rootless-extras.
Подготовка к распаковке …/4-docker-ce-rootless-extras_5%3a20.10.0~3-0~ubuntu-foc
al_amd64.deb …
Распаковывается docker-ce-rootless-extras (5:20.10.0~3-0~ubuntu-focal) …
Выбор ранее не выбранного пакета liberror-perl.
Подготовка к распаковке …/5-liberror-perl_0.17029-1_all.deb …
Распаковывается liberror-perl (0.17029-1) …
Выбор ранее не выбранного пакета git-man.
Подготовка к распаковке …/6-git-man_1%3a2.25.1-1ubuntu3_all.deb …
Распаковывается git-man (1:2.25.1-1ubuntu3) …
Выбор ранее не выбранного пакета git.
Подготовка к распаковке …/7-git_1%3a2.25.1-1ubuntu3_amd64.deb …
Распаковывается git (1:2.25.1-1ubuntu3) …
Выбор ранее не выбранного пакета slirp4netns.
Подготовка к распаковке …/8-slirp4netns_0.4.3-1_amd64.deb …
Распаковывается slirp4netns (0.4.3-1) …
Настраивается пакет slirp4netns (0.4.3-1) …
Настраивается пакет liberror-perl (0.17029-1) …
Настраивается пакет containerd.io (1.4.3-1) …
Created symlink /etc/systemd/system/multi-user.target.wants/containerd.service →
 /lib/systemd/system/containerd.service.
Настраивается пакет docker-ce-cli (5:20.10.0~3-0~ubuntu-focal) …
Настраивается пакет pigz (2.4-1) …
Настраивается пакет git-man (1:2.25.1-1ubuntu3) …
Настраивается пакет docker-ce (5:20.10.0~3-0~ubuntu-focal) …
Created symlink /etc/systemd/system/multi-user.target.wants/docker.service → /li
b/systemd/system/docker.service.
Created symlink /etc/systemd/system/sockets.target.wants/docker.socket → /lib/sy
stemd/system/docker.socket.
Настраивается пакет git (1:2.25.1-1ubuntu3) …
Настраивается пакет docker-ce-rootless-extras (5:20.10.0~3-0~ubuntu-focal) …
Обрабатываются триггеры для man-db (2.9.1-1) …
Обрабатываются триггеры для systemd (245.4-4ubuntu3.3) …
oleg@oleg-VirtualBox:~$ sudo systemctl status docker
● docker.service - Docker Application Container Engine
     Loaded: loaded (/lib/systemd/system/docker.service; enabled; vendor preset>
     Active: active (running) since Wed 2020-12-09 20:11:34 EET; 3min 38s ago
TriggeredBy: ● docker.socket
       Docs: https://docs.docker.com
   Main PID: 5869 (dockerd)
      Tasks: 8
     Memory: 42.0M
     CGroup: /system.slice/docker.service
             └─5869 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/cont>

дек 09 20:11:33 oleg-VirtualBox dockerd[5869]: time="2020-12-09T20:11:33.557876>
дек 09 20:11:33 oleg-VirtualBox dockerd[5869]: time="2020-12-09T20:11:33.558108>
дек 09 20:11:33 oleg-VirtualBox dockerd[5869]: time="2020-12-09T20:11:33.558281>
дек 09 20:11:33 oleg-VirtualBox dockerd[5869]: time="2020-12-09T20:11:33.558865>
дек 09 20:11:34 oleg-VirtualBox dockerd[5869]: time="2020-12-09T20:11:34.004612>
дек 09 20:11:34 oleg-VirtualBox dockerd[5869]: time="2020-12-09T20:11:34.288266>
дек 09 20:11:34 oleg-VirtualBox dockerd[5869]: time="2020-12-09T20:11:34.410529>
дек 09 20:11:34 oleg-VirtualBox dockerd[5869]: time="2020-12-09T20:11:34.411042>
дек 09 20:11:34 oleg-VirtualBox systemd[1]: Started Docker Application Containe>
дек 09 20:11:34 oleg-VirtualBox dockerd[5869]: time="2020-12-09T20:11:34.690811>
lines 1-21/21 (END)

oleg@oleg-VirtualBox:~$ sudo docker run hello-world
Unable to find image 'hello-world:latest' locally
latest: Pulling from library/hello-world
0e03bdcc26d7: Pull complete 
Digest: sha256:1a523af650137b8accdaed439c17d684df61ee4d74feac151b5b337bd29e7eec
Status: Downloaded newer image for hello-world:latest

Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the "hello-world" image from the Docker Hub.
    (amd64)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://hub.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/get-started/

oleg@oleg-VirtualBox:~$ docker search ubuntu
Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get http://%2Fvar%2Frun%2Fdocker.sock/v1.24/images/search?limit=25&term=ubuntu: dial unix /var/run/docker.sock: connect: permission denied
oleg@oleg-VirtualBox:~$ sudo docker search ubuntu
NAME                                                      DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED
ubuntu                                                    Ubuntu is a Debian-based Linux operating sys…   11601     [OK]       
dorowu/ubuntu-desktop-lxde-vnc                            Docker image to provide HTML5 VNC interface …   480                  [OK]
websphere-liberty                                         WebSphere Liberty multi-architecture images …   264       [OK]       
rastasheep/ubuntu-sshd                                    Dockerized SSH service, built on top of offi…   250                  [OK]
consol/ubuntu-xfce-vnc                                    Ubuntu container with "headless" VNC session…   228                  [OK]
ubuntu-upstart                                            Upstart is an event-based replacement for th…   109       [OK]       
neurodebian                                               NeuroDebian provides neuroscience research s…   76        [OK]       
1and1internet/ubuntu-16-nginx-php-phpmyadmin-mysql-5      ubuntu-16-nginx-php-phpmyadmin-mysql-5          50                   [OK]
ubuntu-debootstrap                                        debootstrap --variant=minbase --components=m…   44        [OK]       
open-liberty                                              Open Liberty multi-architecture images based…   39        [OK]       
i386/ubuntu                                               Ubuntu is a Debian-based Linux operating sys…   24                   
nuagebec/ubuntu                                           Simple always updated Ubuntu docker images w…   24                   [OK]
1and1internet/ubuntu-16-apache-php-5.6                    ubuntu-16-apache-php-5.6                        14                   [OK]
1and1internet/ubuntu-16-apache-php-7.0                    ubuntu-16-apache-php-7.0                        13                   [OK]
1and1internet/ubuntu-16-nginx-php-phpmyadmin-mariadb-10   ubuntu-16-nginx-php-phpmyadmin-mariadb-10       11                   [OK]
1and1internet/ubuntu-16-nginx-php-5.6-wordpress-4         ubuntu-16-nginx-php-5.6-wordpress-4             7                    [OK]
1and1internet/ubuntu-16-apache-php-7.1                    ubuntu-16-apache-php-7.1                        6                    [OK]
darksheer/ubuntu                                          Base Ubuntu Image -- Updated hourly             5                    [OK]
1and1internet/ubuntu-16-nginx-php-7.0                     ubuntu-16-nginx-php-7.0                         4                    [OK]
pivotaldata/ubuntu                                        A quick freshening-up of the base Ubuntu doc…   4                    
pivotaldata/ubuntu16.04-build                             Ubuntu 16.04 image for GPDB compilation         2                    
1and1internet/ubuntu-16-php-7.1                           ubuntu-16-php-7.1                               1                    [OK]
pivotaldata/ubuntu-gpdb-dev                               Ubuntu images for GPDB development              1                    
1and1internet/ubuntu-16-sshd                              ubuntu-16-sshd                                  1                    [OK]
smartentry/ubuntu                                         ubuntu with smartentry                          1                    [OK]
oleg@oleg-VirtualBox:~$ sudo docker pull ubuntu
Using default tag: latest
latest: Pulling from library/ubuntu
da7391352a9b: Pull complete 
14428a6d4bcd: Pull complete 
2c2d948710f2: Pull complete 
Digest: sha256:c95a8e48bf88e9849f3e0f723d9f49fa12c5a00cfc6e60d2bc99d87555295e4c
Status: Downloaded newer image for ubuntu:latest
docker.io/library/ubuntu:latest
oleg@oleg-VirtualBox:~$ sudo docker run -it ubuntu
root@e68a6e172268:/# ls
bin  boot  dev  etc  home  lib  lib32  lib64  libx32  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
root@e68a6e172268:/# pwd
/
root@e68a6e172268:/# sudo apt install openssh-server
bash: sudo: command not found
root@e68a6e172268:/# apt install openssh-server
Reading package lists... Done
Building dependency tree       
Reading state information... Done
E: Unable to locate package openssh-server
root@e68a6e172268:/# cd etc
root@e68a6e172268:/etc# ls
adduser.conf            debconf.conf    fstab      init.d        legal          mtab           passwd     rc4.d        selinux      sysctl.d
alternatives            debian_version  gai.conf   issue         libaudit.conf  networks       profile    rc5.d        shadow       systemd
apt                     default         group      issue.net     login.defs     nsswitch.conf  profile.d  rc6.d        shells       terminfo
bash.bashrc             deluser.conf    gshadow    kernel        logrotate.d    opt            rc0.d      rcS.d        skel         update-motd.d
bindresvport.blacklist  dpkg            host.conf  ld.so.cache   lsb-release    os-release     rc1.d      resolv.conf  subgid       xattr.conf
cron.d                  e2scrub.conf    hostname   ld.so.conf    machine-id     pam.conf       rc2.d      rmt          subuid
cron.daily              environment     hosts      ld.so.conf.d  mke2fs.conf    pam.d          rc3.d      security     sysctl.conf
root@e68a6e172268:/etc# cat group
root:x:0:
daemon:x:1:
bin:x:2:
sys:x:3:
adm:x:4:
tty:x:5:
disk:x:6:
lp:x:7:
mail:x:8:
news:x:9:
uucp:x:10:
man:x:12:
proxy:x:13:
kmem:x:15:
dialout:x:20:
fax:x:21:
voice:x:22:
cdrom:x:24:
floppy:x:25:
tape:x:26:
sudo:x:27:
audio:x:29:
dip:x:30:
www-data:x:33:
backup:x:34:
operator:x:37:
list:x:38:
irc:x:39:
src:x:40:
gnats:x:41:
shadow:x:42:
utmp:x:43:
video:x:44:
sasl:x:45:
plugdev:x:46:
staff:x:50:
games:x:60:
users:x:100:
nogroup:x:65534:
root@e68a6e172268:/etc# exit
exit
oleg@oleg-VirtualBox:~$ docker ps -a
Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get http://%2Fvar%2Frun%2Fdocker.sock/v1.24/containers/json?all=1: dial unix /var/run/docker.sock: connect: permission denied
oleg@oleg-VirtualBox:~$ sudo docker ps -a
CONTAINER ID   IMAGE         COMMAND       CREATED          STATUS                      PORTS     NAMES
e68a6e172268   ubuntu        "/bin/bash"   5 minutes ago    Exited (0) 42 seconds ago             angry_morse
cc1974081531   hello-world   "/hello"      21 minutes ago   Exited (0) 21 minutes ago             objective_bassi
oleg@oleg-VirtualBox:~$